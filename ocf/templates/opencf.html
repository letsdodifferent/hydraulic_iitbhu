<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Open Channel Flow Calculator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css">
    <style>
        body {
            background-color: #f8f9fa;
            font-family: Ariral, sans-serif;
        }
        .header {
            font-family: 'Times New Roman', Times, serif;
            background-color: #007bff;
            color: white;
            padding: 20px;
            text-align: center;
        }
        .form-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
        }
        .form-label {
            font-weight: bold;
        }
        .result-field {
            background-color: #e9ecef;
            border: none;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Open Channel Flow Calculator</h1>
    </div>

    <div class="container form-container">
        <form method="post" action="{% url 'calculate' %}">
            {% csrf_token %}
            
            <div class="mb-3">
                <label for="channelType" class="form-label">Select Channel Type</label>
                <select class="form-select" id="channelType" name="channel_type">
                    <option value="Trapezoid" selected>Trapezoid</option>
                    <option value="Triangle">Triangle</option>
                    <option value="Rectangle">Rectangle</option>
                    {% comment %} <option value="circle">Circle</option> {% endcomment %}
                </select>
            </div>

            <div class="mb-3">
                <label for="calculationType" class="form-label">Select Parameter for Solving</label>
                <select class="form-select" id="calculationType" name="calculation_type">
                    <option value="velocity_discharge" selected>Velocity (V) & Discharge (Q)</option>
                    <option value="channel_slope_v">Channel Slope from V</option>
                    <option value="channel_slope_q">Channel Slope from Q</option>
                    <option value="manning_v">Manning Coefficient from V</option>
                    <option value="manning_q">Manning Coefficient from Q</option>
                    <option value="depth_q">Depth from Q</option>
                </select>
            </div>

            <div class="mb-3">
                <label for="unitSystem" class="form-label">Select Unit System</label>
                <select class="form-select" id="unitSystem" name="unit_system" onchange="updatePlaceholders()">
                    <option value="ft" selected>Feet (ft)</option>
                    <option value="m">Meter (m)</option>
                </select>
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="z1" class="form-label">Z1 (Trapezoid and triangle only):</label>
                    <input type="number" class="form-control" step="0.01" name="z1" id="z1" class="z-input" data-name="Z1">
                </div>
                <div class="col-md-6 mb-3">
                    <label for="z2" class="form-label">Z2 (Trapezoid and triangle only):</label>
                    <input type="number" class="form-control" step="0.01" name="z2" id="z2" class="z-input" data-name="Z2">
                </div>
            
                
        
                <div class="col-md-6 mb-3">
                    <label for="channelSlope" class="form-label">Channel Slope</label>
                    <input type="number"step="0.01" class="form-control" id="channelSlope" name="channel_slope" placeholder="Slope in ft/ft">
                </div>
                <div class="col-md-6 mb-3">
                    <label for="waterDepth" class="form-label">Water Depth</label>
                    <input type="number"step="0.01" class="form-control" id="waterDepth" name="water_depth" placeholder="Depth in ft">
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="bottomWidth" class="form-label">Bottom Width</label>
                    <input type="number" step="0.01"class="form-control" id="bottomWidth" name="bottom_width" placeholder="Width in ft">
                </div>
                <!-- <div class="col-md-6 mb-3">
                    <label for="flowDischarge" class="form-label">Flow Discharge</label>
                    <input type="number" class="form-control" id="flowDischarge" name="flow_discharge" placeholder="Discharge in ft³/s">
                </div> -->
            </div>
            <!-- <h1>Manning's Equation Calculator</h1> -->
    <form id="flowForm">
        <!-- <label for="slope">Channel Slope:</label>
        <input type="number" step="0.0001" name="slope" id="slope" required data-unit="ft/ft" data-name="Slope"><br><br> -->

        <label for="n">Manning's Coefficient (n):</label>
        <select name="n" id="n" required>
            <option value="0.014">Clean, uncoated cast iron (n = 0.014)</option>
            <option value="0.013">Clean, coated cast iron (n = 0.013)</option>
            <option value="0.025">Dirty, tuberculed cast iron (n = 0.015-0.035)</option>
            <option value="0.016">Riveted steel (n = 0.015-0.017)</option>
            <option value="0.011">Brass and glass (n = 0.009-0.013)</option>
            <option value="0.023">Firm gravel (n = 0.023)</option>
            <option value="0.060">Very poor natural channels (n = 0.060)</option>
            <!-- Add more options as needed -->
         </select><br><br> 
         

            {% comment %} <div class="mb-3">
                <label for="manningN" class="form-label">Manning's n Value</label>
                <input type="text" class="form-control" id="manningN" name="manning_n" placeholder="Enter Manning's n">
            </div> {% endcomment %}

            <div class="text-center">
                <button type="submit"  onclick="location.href='calculate/" class="btn btn-primary">Calculate</button>
                <button type="reset" class="btn btn-secondary">Reset</button>
            </div>

            <div class="mt-3">
                <div  value="Calculate">
                    <div class="col-md-6 mb-3">
                        <label  class="form-label">flow_area:</label>
                        <div class="form-control"> {{flow_area}} </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label  class="form-label">wetted_perimeter:</label>
                        <div class="form-control">  {{wetted_perimeter}}</div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label  class="form-label"> hydraulic_radius:</label>
                        <div class="form-control"> {{hydraulic_radius}} </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label  class="form-label"> topwidth:</label>
                        <div class="form-control">  {{topwidth}} </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label  class="form-label">hydraulic_depth:</label>
                        <div class="form-control">  {{hydraulic_depth}} </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label  class="form-label">velocity:</label>
                        <div class="form-control"> {{velocity}} </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label  class="form-label">flow:</label>
                        <div class="form-control"> {{flow}} </div>
                    </div>
   
                </div>
            </div>
        </form>
    </div>

    <script>
        function updatePlaceholders() {
            const unitSystem = document.getElementById("unitSystem").value;

            document.getElementById("channelSlope").placeholder = `Slope in ${unitSystem === 'm' ? 'm/m' : 'ft/ft'}`;
            document.getElementById("waterDepth").placeholder = `Depth in ${unitSystem}`;
            document.getElementById("bottomWidth").placeholder = `Width in ${unitSystem}`;
            document.getElementById("flowDischarge").placeholder = `Discharge in ${unitSystem === 'm' ? 'm³/s' : 'ft³/s'}`;
        }
        
    </script>
</body>
</html>

